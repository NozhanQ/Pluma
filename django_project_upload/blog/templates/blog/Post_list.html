{% extends 'base.html' %}
{% block title %}All Posts{% endblock %}
{% block content %}

<h2>All Posts</h2>

<form method="get" class="mb-3">
    <select name="category" class="form-select" onchange="this.form.submit()">
        <option value="">All Categories</option>
        {% for category in categories %}
        <option value="{{ category.id }}" {% if selected_category == category.id %}selected{% endif %}>
            {% endfor %}
    </select>
</form>

{% for post in posts %}
<div class="card mb-3">
    <div class="card-body">
        <h4><a href="{% url 'post_detail' post.pk %}">{{ post.title }}</a></h4>
        <p>by {{ post.author.username }} | {{ post.created_at }}</p>
    </div>
</div>
{% empty %}
<p>No posts found.</p>
{% endfor %}

{% endblock %}